[{"path":"https://mc-stan.org/rstantools/dev/CONTRIBUTING.html","id":null,"dir":"","previous_headings":"","what":"Contributing to rstantools","title":"Contributing to rstantools","text":"outlines propose change rstantools based similar instructions tidyverse packages, including contributing guidelines generated usethis::use_tidy_contributing().","code":""},{"path":"https://mc-stan.org/rstantools/dev/CONTRIBUTING.html","id":"fixing-typos","dir":"","previous_headings":"","what":"Fixing typos","title":"Contributing to rstantools","text":"can fix typos, spelling mistakes, grammatical errors documentation directly using GitHub web interface, long changes made source file. generally means ’ll need edit roxygen2 comments .R, .Rd file. can find .R file generates .Rd reading comment first line.","code":""},{"path":"https://mc-stan.org/rstantools/dev/CONTRIBUTING.html","id":"bigger-changes","dir":"","previous_headings":"","what":"Bigger changes","title":"Contributing to rstantools","text":"want make bigger change, ’s good idea first file issue make sure someone team agrees ’s needed. ’ve found bug, please file issue illustrates bug minimal reproducible example (see e.g. tidyverse reprex instructions). tidyverse guide create great issue advice.","code":""},{"path":"https://mc-stan.org/rstantools/dev/CONTRIBUTING.html","id":"pull-request-process","dir":"","previous_headings":"Bigger changes","what":"Pull request process","title":"Contributing to rstantools","text":"new creating pull requests tips. Using functions usethis package required can helpful process new . Fork package clone onto computer. haven’t done , recommend using usethis::create_from_github(\"stan-dev/rstantools\", fork = TRUE). Install development dependencies devtools::install_dev_deps(), make sure package passes R CMD check running devtools::check(). R CMD check doesn’t pass cleanly, ’s good idea ask help continuing. Create Git branch pull request (PR). recommend using usethis::pr_init(\"brief-description--change\"). Make changes, commit git, create PR running usethis::pr_push(), following prompts browser. title PR briefly describe change. body PR contain Fixes #issue-number. user-facing changes, add bullet top NEWS.md (.e. just first header). Follow style already used NEWS.md.","code":""},{"path":"https://mc-stan.org/rstantools/dev/CONTRIBUTING.html","id":"code-style","dir":"","previous_headings":"Bigger changes","what":"Code style","title":"Contributing to rstantools","text":"New code attempt follow style used package. doubt follow tidyverse style guide. use roxygen2, Markdown syntax, documentation. use testthat unit tests. Contributions test cases included easier accept.","code":""},{"path":"https://mc-stan.org/rstantools/dev/CONTRIBUTING.html","id":"code-of-conduct","dir":"","previous_headings":"","what":"Code of Conduct","title":"Contributing to rstantools","text":"Please note rstantools project follows Stan project’s Code Conduct. contributing project agree abide terms.","code":""},{"path":"https://mc-stan.org/rstantools/dev/articles/developer-guidelines.html","id":"note-to-developers","dir":"Articles","previous_headings":"","what":"Note to developers","title":"Guidelines for Developers of R Packages Interfacing with Stan","text":"One coolest things working project like Stan seeing users begin develop tools making Stan accessible audiences may otherwise benefit Stan offers. particular, recently started seeing growing number R packages provide high-level interfaces Stan, using rstan package estimating models without requiring user familiar Stan modeling language . great development like support efforts going forward, -date made little effort coordinate development packages. avoid Wild West, speak, Stan-based R packages, think important developers make every effort adhere certain guidelines order ensure packages highest possible quality provide best possible experience users. end, post present set recommendations development R packages interface Stan. recommendations based software design principles value well many things learning continue developing packages review packages developed others. exceptions recommendations (e.g., brms package sensible exception one guidelines Stan code), strongly recommend trying follow whenever possible. recommendations set stone. expect evolve much appreciate feedback can improved. , course, look forward seeing packages develop using Stan, please let us know !","code":""},{"path":[]},{"path":"https://mc-stan.org/rstantools/dev/articles/developer-guidelines.html","id":"general-package-structure-and-development","dir":"Articles","previous_headings":"Guidelines for R packages providing interfaces to Stan","what":"General package structure and development","title":"Guidelines for Developers of R Packages Interfacing with Stan","text":"rstantools package provides rstan_create_package() function, use create basic structure package. (v2.0.0 replaces rstan_package_skeleton function.) set package functionality pre-compiled Stan programs, style rstanarm package (source code: https://github.com/stan-dev/rstanarm). Use version control (e.g., git). Unless developing proprietary private software, organize code repository public GitHub (similar service, preferably GitHub). public even early stages development, officially released. recommend add note README file install development version package, like bayesplot README Unit testing essential. several R packages make relatively easy write tests package. R packages (e.g., rstanarm, brms, bayesplot, shinystan, loo others) use testthat package purpose, prefer different testing framework ’s fine. covr package useful calculating line coverage tests, recommend reaching high level coverage releasing package. Good line coverage guarantee high quality tests, ’s good first step. also recommend setting automatic testing package using GitHub Actions. See https://github.com/r-lib/actions useful templates.","code":""},{"path":"https://mc-stan.org/rstantools/dev/articles/developer-guidelines.html","id":"stan-code","dir":"Articles","previous_headings":"Guidelines for R packages providing interfaces to Stan","what":"Stan code","title":"Guidelines for Developers of R Packages Interfacing with Stan","text":"Stan code estimating models included pre-written static .stan files compiled package built (see Stan programs directory rstanarm repo examples). can also use subdirectories include code chunks used multiple .stan files (see rstanarm repo examples). set package using rstan_create_package structure created . means package write Stan program user calls model fitting function package, rather use Stan programs written hand advance (working model don’t think possible please let us know). several reasons . Pre-compiled Stan programs can run users Windows Mac OSX without install C++ compiler, dramatically expands universe potential users package. Pre-compiled Stan programs run immediately called, avoiding compilation time. CRAN policy permits long installation times imposes restrictions time consumed examples unit tests much shorter time takes compile even simple Stan program. Thus, possible adequately test package pre-compiled Stan programs. Pre-compiled Stan programs can use custom C++ functions. provide flexibility users, Stan programs can include branching logic (conditional statements) even small number .stan files can still allow many different specifications made user (see .stan files rstanarm examples). Use best practices Stan code. models intend implement discussed Stan manual Stan users forum follow recommendations apply case. unsure whether Stan programs can made efficient numerically stable please ask us Stan users forum. Especially ask us unsure whether Stan programs indeed estimating intended model. Relatedly, prioritize safety speed Stan code sampler settings. example, can write program runs faster potentially less stable, minimum make stable version default. also means , rare exceptions, change recommended MCMC defaults (e.g. 4 chains, 1000+1000 iterations, NUTS static HMC), unless setting defaults something conservative. rstanarm even goes one step , making default value adapt_delta tuning parameter least 0.95 models (rather rstan’s default 0.8) order reduce step size therefore also limit potential divergences. means rstanarm models may often run bit slower need user doesn’t change defaults, also means users face fewer situations need know change defaults implications changing defaults really .","code":""},{"path":"https://mc-stan.org/rstantools/dev/articles/developer-guidelines.html","id":"r-code-and-documentation","dir":"Articles","previous_headings":"Guidelines for R packages providing interfaces to Stan","what":"R code and documentation","title":"Guidelines for Developers of R Packages Interfacing with Stan","text":"Functions/methods provide useful post-estimation functionality given names corresponding functions rstanarm (applicable). example, posterior_predict() draw posterior predictive distribution, posterior_interval() posterior uncertainty intervals, etc. make easier, similar rstanarm functions converted S3 methods stanreg objects created rstanarm S3 generic functions included rstantools package. package import generics rstantools whichever functions want include package provide methods fitted model objects returned model-fitting functions. functions (e.g. .matrix) generics already available base R core R packages. clear, saying naming conventions used rstanarm/rstantools necessarily optimal. (think one function names changed please let us know suggest alternative. substantial improvement may consider renaming function deprecating current version.) Rather, guideline intended make function names consistent across Stan-based R packages, improve user experience users want take advantage variety packages. mess every R package using Stan different names functionality. bayesplot package serves back-end plotting rstanarm (see example pp_check.stanreg plot.stanreg), brms, packages, hope developers Stan-based R packages also use . can see R packages using bayesplot Reverse dependencies section bayesplot CRAN page. plot intend include package, already available bayesplot recommend using available version suggesting (contributing) better version. already available good chance interested including bayesplot plot also useful developers. posterior package (new 2021) provides state art posterior inference diagnostics, various summaries draws convenient formats, functionality converting (manipulating) many different useful formats draws posterior prior distributions. recommend using functionality package recommending users. Take documentation seriously. documentation won’t perfect (constantly find holes doc R packages Stan ecosystem), make every effort provide clear thorough documentation.","code":""},{"path":"https://mc-stan.org/rstantools/dev/articles/developer-guidelines.html","id":"recommended-resources","dir":"Articles","previous_headings":"Guidelines for R packages providing interfaces to Stan","what":"Recommended resources","title":"Guidelines for Developers of R Packages Interfacing with Stan","text":"Hadley Wickham Jenny Bryan’s book R packages. interested developing R package interfaces Stan experienced package developer, recommend book, free read online. Even experienced developer R packages, book still great resource. need help setting package questions guidelines best places go Stan Forums GitHub issue tracker rstantools package.","code":""},{"path":"https://mc-stan.org/rstantools/dev/articles/minimal-rstan-package.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Step by step guide for creating a package that depends on RStan","text":"vignette walk steps necessary creating R package depends Stan creating package one function fits simple linear regression. continuing, recommend first read vignette Guidelines Developers R Packages Interfacing Stan.","code":""},{"path":"https://mc-stan.org/rstantools/dev/articles/minimal-rstan-package.html","id":"creating-the-package-skeleton","dir":"Articles","previous_headings":"","what":"Creating the package skeleton","title":"Step by step guide for creating a package that depends on RStan","text":"rstantools package offers two methods adding Stan functionality R packages: rstan_create_package(): set new R package Stan programs use_rstan(): add Stan functionality existing R package use rstan_create_package() initialize bare-bones package directory. name demo package rstanlm; fit simple linear regression model using Stan. existing .stan files include package use optional stan_files argument rstan_create_package() include . Another option, ’ll use , add Stan files basic structure package place. can now set new working directory new package directory view contents. (Note: using RStudio default newly created project package opened new session need call setwd().) sections DESCRIPTION file need edited hand (e.g., Title, Author, Maintainer, Description, also can set fields argument rstan_create_package()). However, rstan_create_package() added necessary packages versions Depends, Imports, LinkingTo enable Stan functionality.","code":"library(\"rstantools\") rstan_create_package(path = 'rstanlm') This is rstantools version 2.5.0.9000 Creating package skeleton for package: rstanlm  [34mPackage [39m: rstanlm  [34mTitle [39m: What the Package Does (One Line, Title Case)  [34mVersion [39m: 0.0.0.9000  [34mAuthors@R [39m (parsed):     * First Last <first.last@example.com> [aut, cre]  [34mDescription [39m: What the package does (one paragraph).  [34mLicense [39m: `use_mit_license()`, `use_gpl3_license()` or friends to     pick a license  [34mEncoding [39m: UTF-8  [34mRoxygen [39m: list(markdown = TRUE)  [34mRoxygenNote [39m: 7.3.3 Creating inst/stan/include directory ... Creating inst/include directory ... Creating src directory ... Updating DESCRIPTION ... Adding 'configure' files ... Next, add the following lines (e.g., via <package-name>-package.R if using roxygen) to your NAMESPACE:  import(Rcpp) import(methods) importFrom(rstan, sampling) importFrom(rstantools, rstan_config) importFrom(RcppParallel, RcppParallelLibs) useDynLib(rstanlm, .registration = TRUE) Done. Adding rstanlm-package.R file ... Adding .gitignore file ... Adding .Rbuildignore file ... Configuring Stan compile and module export instructions ... Further Stan-specific steps are described in 'rstanlm/Read-and-delete-me'. setwd(\"rstanlm\") list.files(all.files = TRUE) [1] \".\"                  \"..\"                 \".gitignore\"          [4] \".Rbuildignore\"      \"configure\"          \"configure.win\"       [7] \"DESCRIPTION\"        \"inst\"               \"NAMESPACE\"          [10] \"R\"                  \"Read-and-delete-me\" \"src\" file.show(\"DESCRIPTION\") Package: rstanlm Title: What the Package Does (One Line, Title Case) Version: 0.0.0.9000 Authors@R:      person(\"First\", \"Last\", , \"first.last@example.com\", role = c(\"aut\", \"cre\")) Description: What the package does (one paragraph). License: `use_mit_license()`, `use_gpl3_license()` or friends to pick a     license Encoding: UTF-8 Roxygen: list(markdown = TRUE) RoxygenNote: 7.3.3 Biarch: true Depends:      R (>= 3.4.0) Imports:      methods,     Rcpp (>= 0.12.0),     RcppParallel (>= 5.0.1),     rstan (>= 2.18.1),     rstantools (>= 2.5.0.9000) LinkingTo:      BH (>= 1.66.0),     Rcpp (>= 0.12.0),     RcppEigen (>= 0.3.3.3.0),     RcppParallel (>= 5.0.1),     rstan (>= 2.18.1),     StanHeaders (>= 2.18.0) SystemRequirements: GNU make"},{"path":"https://mc-stan.org/rstantools/dev/articles/minimal-rstan-package.html","id":"read-and-delete-me-file","dir":"Articles","previous_headings":"","what":"Read-and-delete-me file","title":"Step by step guide for creating a package that depends on RStan","text":"deleting Read--delete-file new package directory make sure read contains important instructions customizing package: can move file directory, delete , list .Rbuildignore file want keep directory.","code":"file.show(\"Read-and-delete-me\") Stan-specific notes:  * All '.stan' files containing stanmodel definitions must be placed in 'inst/stan'. * Additional files to be included by stanmodel definition files   (via e.g., #include \"mylib.stan\") must be placed in any subfolder of 'inst/stan'. * Additional C++ files needed by any '.stan' file must be placed in 'inst/include',   and can only interact with the Stan C++ library via '#include' directives   placed in the file 'inst/include/stan_meta_header.hpp'. * The precompiled stanmodel objects will appear in a named list called 'stanmodels',   and you can call them with e.g., 'rstan::sampling(stanmodels$foo, ...)' file.remove('Read-and-delete-me') [1] TRUE"},{"path":"https://mc-stan.org/rstantools/dev/articles/minimal-rstan-package.html","id":"stan-files","dir":"Articles","previous_headings":"","what":"Stan files","title":"Step by step guide for creating a package that depends on RStan","text":"package call rstan’s sampling() method use MCMC fit simple linear regression model outcome variable y single predictor x. writing necessary Stan program, file saved .stan extension inst/stan subdirectory. ’ll save following program inst/stan/lm.stan: inst/stan subdirectory can contain additional Stan programs required package. installation, Stan programs compiled saved list stanmodels can used R function package. rule Stan program compiled model code inst/stan/foo.stan stored list element stanmodels$foo. Thus, filename Stan program inst/stan directory contain spaces dashes start number utilize non-ASCII characters.","code":"// Save this file as inst/stan/lm.stan data {   int<lower=1> N;   vector[N] x;   vector[N] y; } parameters {   real intercept;   real beta;   real<lower=0> sigma; } model {   // ... priors, etc.    y ~ normal(intercept + beta * x, sigma); }"},{"path":"https://mc-stan.org/rstantools/dev/articles/minimal-rstan-package.html","id":"r-files","dir":"Articles","previous_headings":"","what":"R files","title":"Step by step guide for creating a package that depends on RStan","text":"next create file R/lm_stan.R define function lm_stan() compiled Stan model used. Setting rstan_create_package() argument roxygen = TRUE (default value) enables roxygen2 documentation package functions. following comment block placed lm_stan.R ensures function help file added package NAMESPACE: roxygen2 documentation enabled, top-level package file R/rstanlm-package.R created rstan_create_package() import necessary functions packages set package compiling Stan C++ code: #' @description section can manually edited provided specific information package.","code":"# Save this file as `R/lm_stan.R`  #' Bayesian linear regression with Stan #' #' @export #' @param x Numeric vector of input values. #' @param y Numeric vector of output values. #' @param ... Arguments passed to `rstan::sampling` (e.g. iter, chains). #' @return An object of class `stanfit` returned by `rstan::sampling` #' lm_stan <- function(x, y, ...) {   standata <- list(x = x, y = y, N = length(y))   out <- rstan::sampling(stanmodels$lm, data = standata, ...)   return(out) } file.show(file.path(\"R\", \"rstanlm-package.R\")) #' The 'rstanlm' package. #' #' @description A DESCRIPTION OF THE PACKAGE #' #' @docType package #' @name rstanlm-package #' @aliases rstanlm #' @useDynLib rstanlm, .registration = TRUE #' @import methods #' @import Rcpp #' @importFrom rstan sampling #' @importFrom rstantools rstan_config #' @importFrom RcppParallel RcppParallelLibs #' #' @references #' Stan Development Team (NA). RStan: the R interface to Stan. R package version 2.32.7. https://mc-stan.org #' NULL"},{"path":"https://mc-stan.org/rstantools/dev/articles/minimal-rstan-package.html","id":"documentation","dir":"Articles","previous_headings":"","what":"Documentation","title":"Step by step guide for creating a package that depends on RStan","text":"roxygen documentation enabled, need generate documentation lm_stan update NAMESPACE function exported, .e., available users package installed. can done function roxygen2::roxygenize(), needs called twice initially.","code":"try(roxygen2::roxygenize(load_code = rstantools_load_code), silent = TRUE) roxygen2::roxygenize()  [1m [22mWriting  [34mNAMESPACE [39m  [1m [22m [36mℹ [39m Loading  [34mrstanlm [39m  [36mℹ [39m Re-compiling  [34m [34mrstanlm [34m [39m (debug build)   [1m [22m [31m✖ [39m rstanlm-package.R:18: `@docType \"package\"` is deprecated.  [36mℹ [39m Please document \"_PACKAGE\" instead.  [1m [22mWriting  [34mNAMESPACE [39m  [1m [22mWriting  [34mlm_stan.Rd [39m  [1m [22mWriting  [34mrstanlm-package.Rd [39m"},{"path":"https://mc-stan.org/rstantools/dev/articles/minimal-rstan-package.html","id":"install-and-use","dir":"Articles","previous_headings":"","what":"Install and use","title":"Step by step guide for creating a package that depends on RStan","text":"Finally, package ready installed: also possible use devtools::install(quick=FALSE) install package. argument quick=FALSE necessary want recompile Stan models. Going forward, make change R code documentation, can set quick=TRUE speed process, use devtools::load_all(). installation, package can loaded used like R package:","code":"# using ../rstanlm because already inside the rstanlm directory install.packages(\"../rstanlm\", repos = NULL, type = \"source\") Installing package into '/home/runner/work/_temp/Library' (as 'lib' is unspecified) library(\"rstanlm\") fit <- lm_stan(y = rnorm(10), x = rnorm(10),                 # arguments passed to sampling                iter = 2000, refresh = 500) SAMPLING FOR MODEL 'lm' NOW (CHAIN 1). Chain 1:  Chain 1: Gradient evaluation took 9.9e-05 seconds Chain 1: 1000 transitions using 10 leapfrog steps per transition would take 0.99 seconds. Chain 1: Adjust your expectations accordingly! Chain 1:  Chain 1:  Chain 1: Iteration:    1 / 2000 [  0%]  (Warmup) Chain 1: Iteration:  500 / 2000 [ 25%]  (Warmup) Chain 1: Iteration: 1000 / 2000 [ 50%]  (Warmup) Chain 1: Iteration: 1001 / 2000 [ 50%]  (Sampling) Chain 1: Iteration: 1500 / 2000 [ 75%]  (Sampling) Chain 1: Iteration: 2000 / 2000 [100%]  (Sampling) Chain 1:  Chain 1:  Elapsed Time: 0.575 seconds (Warm-up) Chain 1:                0.607 seconds (Sampling) Chain 1:                1.182 seconds (Total) Chain 1:   SAMPLING FOR MODEL 'lm' NOW (CHAIN 2). Chain 2:  Chain 2: Gradient evaluation took 7.7e-05 seconds Chain 2: 1000 transitions using 10 leapfrog steps per transition would take 0.77 seconds. Chain 2: Adjust your expectations accordingly! Chain 2:  Chain 2:  Chain 2: Iteration:    1 / 2000 [  0%]  (Warmup) Chain 2: Iteration:  500 / 2000 [ 25%]  (Warmup) Chain 2: Iteration: 1000 / 2000 [ 50%]  (Warmup) Chain 2: Iteration: 1001 / 2000 [ 50%]  (Sampling) Chain 2: Iteration: 1500 / 2000 [ 75%]  (Sampling) Chain 2: Iteration: 2000 / 2000 [100%]  (Sampling) Chain 2:  Chain 2:  Elapsed Time: 0.596 seconds (Warm-up) Chain 2:                0.486 seconds (Sampling) Chain 2:                1.082 seconds (Total) Chain 2:   SAMPLING FOR MODEL 'lm' NOW (CHAIN 3). Chain 3:  Chain 3: Gradient evaluation took 6.7e-05 seconds Chain 3: 1000 transitions using 10 leapfrog steps per transition would take 0.67 seconds. Chain 3: Adjust your expectations accordingly! Chain 3:  Chain 3:  Chain 3: Iteration:    1 / 2000 [  0%]  (Warmup) Chain 3: Iteration:  500 / 2000 [ 25%]  (Warmup) Chain 3: Iteration: 1000 / 2000 [ 50%]  (Warmup) Chain 3: Iteration: 1001 / 2000 [ 50%]  (Sampling) Chain 3: Iteration: 1500 / 2000 [ 75%]  (Sampling) Chain 3: Iteration: 2000 / 2000 [100%]  (Sampling) Chain 3:  Chain 3:  Elapsed Time: 0.587 seconds (Warm-up) Chain 3:                0.549 seconds (Sampling) Chain 3:                1.136 seconds (Total) Chain 3:   SAMPLING FOR MODEL 'lm' NOW (CHAIN 4). Chain 4:  Chain 4: Gradient evaluation took 6.7e-05 seconds Chain 4: 1000 transitions using 10 leapfrog steps per transition would take 0.67 seconds. Chain 4: Adjust your expectations accordingly! Chain 4:  Chain 4:  Chain 4: Iteration:    1 / 2000 [  0%]  (Warmup) Chain 4: Iteration:  500 / 2000 [ 25%]  (Warmup) Chain 4: Iteration: 1000 / 2000 [ 50%]  (Warmup) Chain 4: Iteration: 1001 / 2000 [ 50%]  (Sampling) Chain 4: Iteration: 1500 / 2000 [ 75%]  (Sampling) Chain 4: Iteration: 2000 / 2000 [100%]  (Sampling) Chain 4:  Chain 4:  Elapsed Time: 0.57 seconds (Warm-up) Chain 4:                0.614 seconds (Sampling) Chain 4:                1.184 seconds (Total) Chain 4: print(fit) Inference for Stan model: lm. 4 chains, each with iter=2000; warmup=1000; thin=1;  post-warmup draws per chain=1000, total post-warmup draws=4000.             mean se_mean   sd   2.5%   25%   50%   75% 97.5% n_eff Rhat intercept  0.09    0.01 0.48  -0.89 -0.20  0.08  0.38  1.02  2396 1.00 beta      -0.07    0.01 0.46  -0.95 -0.35 -0.08  0.21  0.89  2029 1.00 sigma      1.44    0.01 0.46   0.85  1.13  1.35  1.65  2.56  1216 1.00 lp__      -7.38    0.05 1.45 -11.12 -8.03 -7.00 -6.33 -5.76   867 1.01  Samples were drawn using NUTS(diag_e) at Wed Dec 31 17:48:28 2025. For each parameter, n_eff is a crude measure of effective sample size, and Rhat is the potential scale reduction factor on split chains (at  convergence, Rhat=1)."},{"path":"https://mc-stan.org/rstantools/dev/articles/minimal-rstan-package.html","id":"advanced-options","dir":"Articles","previous_headings":"","what":"Advanced options","title":"Step by step guide for creating a package that depends on RStan","text":"Details can found documentation rstan_create_package() mention briefly : Running rstan_create_package() auto_config = TRUE (default value) automatically synchronizes Stan C++ files .stan model files located inst/stan, although creates dependency package rstantools (.e., rstantools must installed package work). Setting auto_config = FALSE removes dependency, cost manually synchronize Stan C++ files running rstan_config() every time package .stan file added, removed, even just modified. function use_rstan() can used add Stan functionality existing package, instead building package scratch. Note: already using roxygen package, ’ll use roxygen update Namespace file via R/<package-name>-package.R file. Check roxygen documentation details.","code":""},{"path":"https://mc-stan.org/rstantools/dev/articles/minimal-rstan-package.html","id":"adding-additional-stan-models-to-an-existing-r-package-with-stan-models","dir":"Articles","previous_headings":"","what":"Adding additional Stan models to an existing R package with Stan models","title":"Step by step guide for creating a package that depends on RStan","text":"One may add additional Stan models existing package. following steps required one using devtools: Add new Stan file, e.g., inst/stan/new.stan Run pkgbuild::compile_dll() preform fake R CMD install. Run roxygen2::roxygenize() update documentation. Run devtools::install() install package locally.","code":""},{"path":"https://mc-stan.org/rstantools/dev/articles/minimal-rstan-package.html","id":"links","dir":"Articles","previous_headings":"","what":"Links","title":"Step by step guide for creating a package that depends on RStan","text":"Guidelines Developers R Packages Interfacing Stan Ask question Stan Forums R packages Hadley Wickham Jenny Bryan provides solid foundation R package development well release process.","code":""},{"path":"https://mc-stan.org/rstantools/dev/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Jonah Gabry. Author, maintainer. Ben Goodrich. Author. Martin Lysy. Author. Andrew Johnson. Author. Hamada S. Badr. Contributor. Marco Colombo. Contributor. Stefan Siegert. Contributor. Trustees Columbia University. Copyright holder.","code":""},{"path":"https://mc-stan.org/rstantools/dev/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Gabry J, Goodrich B, Lysy M, Johnson (2025). rstantools: Tools Developing R Packages Interfacing 'Stan'. R package version 2.5.0.9000, https://mc-stan.org/rstantools/.","code":"@Manual{,   title = {rstantools: Tools for Developing R Packages Interfacing with 'Stan'},   author = {Jonah Gabry and Ben Goodrich and Martin Lysy and Andrew Johnson},   year = {2025},   note = {R package version 2.5.0.9000},   url = {https://mc-stan.org/rstantools/}, }"},{"path":[]},{"path":"https://mc-stan.org/rstantools/dev/index.html","id":"overview","dir":"","previous_headings":"","what":"Overview","title":"Tools for Developing R Packages Interfacing with Stan","text":"rstantools package provides tools developing R packages interfacing Stan. package vignettes provide guidelines recommendations developers well demonstration creating working R package pre-compiled Stan program. Guidelines developers R Packages interfacing Stan Step step guide creating package depends RStan","code":""},{"path":"https://mc-stan.org/rstantools/dev/index.html","id":"resources","dir":"","previous_headings":"","what":"Resources","title":"Tools for Developing R Packages Interfacing with Stan","text":"mc-stan.org/rstantools (online documentation, vignettes) Ask question (Stan Forums Discourse) Open issue (GitHub issues bug reports, feature requests)","code":""},{"path":"https://mc-stan.org/rstantools/dev/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Tools for Developing R Packages Interfacing with Stan","text":"Install CRAN: Install latest development version GitHub: installation GitHub build vignettes, recommend viewing online mc-stan.org/rstantools/articles.","code":"install.packages(\"rstantools\") # install.packages(\"remotes\") remotes::install_github(\"stan-dev/rstantools\")"},{"path":"https://mc-stan.org/rstantools/dev/reference/bayes_R2.html","id":null,"dir":"Reference","previous_headings":"","what":"Generic function and default method for Bayesian R-squared — bayes_R2","title":"Generic function and default method for Bayesian R-squared — bayes_R2","text":"Generic function default method Bayesian version R-squared regression models. generic LOO-adjusted R-squared also provided. See bayes_R2.stanreg() method rstanarm package example defining method.","code":""},{"path":"https://mc-stan.org/rstantools/dev/reference/bayes_R2.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generic function and default method for Bayesian R-squared — bayes_R2","text":"","code":"bayes_R2(object, ...)  # Default S3 method bayes_R2(object, y, ...)  loo_R2(object, ...)"},{"path":"https://mc-stan.org/rstantools/dev/reference/bayes_R2.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generic function and default method for Bayesian R-squared — bayes_R2","text":"object object use. ... Arguments passed methods. See methods rstanarm package examples. y default method, vector y values length number columns matrix used object.","code":""},{"path":"https://mc-stan.org/rstantools/dev/reference/bayes_R2.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generic function and default method for Bayesian R-squared — bayes_R2","text":"bayes_R2() loo_R2() methods return vector length equal posterior sample size. default bayes_R2() method just takes object matrix y-hat values (one column per observation, one row per posterior draw) y vector length equal ncol(object).","code":""},{"path":"https://mc-stan.org/rstantools/dev/reference/bayes_R2.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Generic function and default method for Bayesian R-squared — bayes_R2","text":"Andrew Gelman, Ben Goodrich, Jonah Gabry, Aki Vehtari (2019). R-squared Bayesian regression models. American Statistician, 73(3):307-309. DOI: 10.1080/00031305.2018.1549100. (Preprint, Notebook)","code":""},{"path":[]},{"path":"https://mc-stan.org/rstantools/dev/reference/init_cpp.html","id":null,"dir":"Reference","previous_headings":"","what":"Register functions implemented in C++ — init_cpp","title":"Register functions implemented in C++ — init_cpp","text":"set package using rstan_package_skeleton() version 1.2.1 rstantools may necessary call function order pass R CMD check R >= 3.4. used rstan_package_skeleton() rstantools version 1.2.1 later already done automatically.","code":""},{"path":"https://mc-stan.org/rstantools/dev/reference/init_cpp.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Register functions implemented in C++ — init_cpp","text":"","code":"init_cpp(name, path)"},{"path":"https://mc-stan.org/rstantools/dev/reference/init_cpp.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Register functions implemented in C++ — init_cpp","text":"name name package string. path path root directory package string. specified assumed already current working directory.","code":""},{"path":"https://mc-stan.org/rstantools/dev/reference/init_cpp.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Register functions implemented in C++ — init_cpp","text":"function called side effect writing necessary init.cpp file package's src/ directory.","code":""},{"path":"https://mc-stan.org/rstantools/dev/reference/log_lik.html","id":null,"dir":"Reference","previous_headings":"","what":"Generic function for pointwise log-likelihood — log_lik","title":"Generic function for pointwise log-likelihood — log_lik","text":"define new function log_lik() rather stats::logLik() method (addition conceptual difference) documentation logLik() states return value single number, whereas log_lik() returns matrix. See log_lik.stanreg() method rstanarm package example defining method.","code":""},{"path":"https://mc-stan.org/rstantools/dev/reference/log_lik.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generic function for pointwise log-likelihood — log_lik","text":"","code":"log_lik(object, ...)"},{"path":"https://mc-stan.org/rstantools/dev/reference/log_lik.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generic function for pointwise log-likelihood — log_lik","text":"object object use. ... Arguments passed methods. See methods rstanarm package examples.","code":""},{"path":"https://mc-stan.org/rstantools/dev/reference/log_lik.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generic function for pointwise log-likelihood — log_lik","text":"log_lik() methods return \\(S\\) \\(N\\) matrix, \\(S\\) size posterior sample (number draws posterior distribution) \\(N\\) number data points.","code":""},{"path":[]},{"path":"https://mc-stan.org/rstantools/dev/reference/log_lik.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Generic function for pointwise log-likelihood — log_lik","text":"","code":"# See help(\"log_lik\", package = \"rstanarm\")"},{"path":"https://mc-stan.org/rstantools/dev/reference/loo-prediction.html","id":null,"dir":"Reference","previous_headings":"","what":"Generic functions for LOO predictions — loo-prediction","title":"Generic functions for LOO predictions — loo-prediction","text":"See methods rstanarm package examples.","code":""},{"path":"https://mc-stan.org/rstantools/dev/reference/loo-prediction.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generic functions for LOO predictions — loo-prediction","text":"","code":"loo_linpred(object, ...)  loo_epred(object, ...)  loo_predict(object, ...)  loo_predictive_interval(object, ...)  loo_pit(object, ...)  # Default S3 method loo_pit(object, y, lw, ...)"},{"path":"https://mc-stan.org/rstantools/dev/reference/loo-prediction.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generic functions for LOO predictions — loo-prediction","text":"object object use. ... Arguments passed methods. See methods rstanarm package examples. y default method loo_pit(), vector y values length number columns matrix used object. lw default method loo_pit(), matrix log-weights length number columns matrix used object.","code":""},{"path":"https://mc-stan.org/rstantools/dev/reference/loo-prediction.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generic functions for LOO predictions — loo-prediction","text":"loo_predict(), loo_epred(), loo_linpred(), loo_pit() (probability integral transform) methods return vector length equal number observations data. discrete observations, probability integral transform randomised ensure theoretical uniformity. Fix random seed reproducible results discrete data. details, see Czado et al. (2009). loo_predictive_interval() methods return two-column matrix formatted way predictive_interval().","code":""},{"path":"https://mc-stan.org/rstantools/dev/reference/loo-prediction.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Generic functions for LOO predictions — loo-prediction","text":"Czado, C., Gneiting, T., Held, L. (2009). Predictive Model Assessment Count Data. Biometrics. 65(4), 1254-1261. doi:10.1111/j.1541-0420.2009.01191.x .","code":""},{"path":[]},{"path":"https://mc-stan.org/rstantools/dev/reference/nsamples.html","id":null,"dir":"Reference","previous_headings":"","what":"Generic function for extracting the number of posterior samples — nsamples","title":"Generic function for extracting the number of posterior samples — nsamples","text":"Generic function extracting number posterior samples","code":""},{"path":"https://mc-stan.org/rstantools/dev/reference/nsamples.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generic function for extracting the number of posterior samples — nsamples","text":"","code":"nsamples(object, ...)"},{"path":"https://mc-stan.org/rstantools/dev/reference/nsamples.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generic function for extracting the number of posterior samples — nsamples","text":"object object use. ... Arguments passed methods. See methods rstanarm package examples.","code":""},{"path":"https://mc-stan.org/rstantools/dev/reference/posterior_epred.html","id":null,"dir":"Reference","previous_headings":"","what":"Generic function for accessing the posterior distribution of the conditional expectation — posterior_epred","title":"Generic function for accessing the posterior distribution of the conditional expectation — posterior_epred","text":"Extract posterior draws conditional expectation. See rstanarm package example.","code":""},{"path":"https://mc-stan.org/rstantools/dev/reference/posterior_epred.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generic function for accessing the posterior distribution of the conditional expectation — posterior_epred","text":"","code":"posterior_epred(object, ...)"},{"path":"https://mc-stan.org/rstantools/dev/reference/posterior_epred.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generic function for accessing the posterior distribution of the conditional expectation — posterior_epred","text":"object object use. ... Arguments passed methods. See methods rstanarm package examples.","code":""},{"path":"https://mc-stan.org/rstantools/dev/reference/posterior_epred.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generic function for accessing the posterior distribution of the conditional expectation — posterior_epred","text":"posterior_epred() methods return \\(D\\) \\(N\\) matrix, \\(D\\) number draws posterior distribution distribution \\(N\\) number data points.","code":""},{"path":[]},{"path":"https://mc-stan.org/rstantools/dev/reference/posterior_interval.html","id":null,"dir":"Reference","previous_headings":"","what":"Generic function and default method for posterior uncertainty intervals — posterior_interval","title":"Generic function and default method for posterior uncertainty intervals — posterior_interval","text":"intervals often referred credible intervals, use term uncertainty intervals highlight fact wider intervals correspond greater uncertainty. See posterior_interval.stanreg() rstanarm package example.","code":""},{"path":"https://mc-stan.org/rstantools/dev/reference/posterior_interval.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generic function and default method for posterior uncertainty intervals — posterior_interval","text":"","code":"posterior_interval(object, ...)  # Default S3 method posterior_interval(object, prob = 0.9, ...)"},{"path":"https://mc-stan.org/rstantools/dev/reference/posterior_interval.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generic function and default method for posterior uncertainty intervals — posterior_interval","text":"object object use. ... Arguments passed methods. See methods rstanarm package examples. prob number \\(p \\(0,1)\\) indicating desired probability mass include intervals.","code":""},{"path":"https://mc-stan.org/rstantools/dev/reference/posterior_interval.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generic function and default method for posterior uncertainty intervals — posterior_interval","text":"posterior_interval() methods return matrix two columns many rows model parameters (subset parameters specified user). given value prob, \\(p\\), columns correspond lower upper \\(100p\\)\\ names \\(100\\alpha/2\\)\\ \\(\\alpha = 1-p\\). example, prob=0.9 specified (\\(90\\)\\ \"95%\", respectively. default method just takes object matrix (one column per parameter) computes quantiles, prob defaulting 0.9.","code":""},{"path":[]},{"path":"https://mc-stan.org/rstantools/dev/reference/posterior_interval.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Generic function and default method for posterior uncertainty intervals — posterior_interval","text":"","code":"# Default method takes a numeric matrix (of posterior draws) draws <- matrix(rnorm(100 * 5), 100, 5) # fake draws colnames(draws) <- paste0(\"theta_\", 1:5) posterior_interval(draws) #>                5%      95% #> theta_1 -1.865365 1.683664 #> theta_2 -1.517411 1.882336 #> theta_3 -1.568718 1.618074 #> theta_4 -1.397015 1.842534 #> theta_5 -1.774352 1.490540  # Also see help(\"posterior_interval\", package = \"rstanarm\")"},{"path":"https://mc-stan.org/rstantools/dev/reference/posterior_linpred.html","id":null,"dir":"Reference","previous_headings":"","what":"Generic function for accessing the posterior distribution of the linear predictor — posterior_linpred","title":"Generic function for accessing the posterior distribution of the linear predictor — posterior_linpred","text":"Extract posterior draws linear predictor, possibly transformed inverse-link function. See posterior_linpred.stanreg() rstanarm package example.","code":""},{"path":"https://mc-stan.org/rstantools/dev/reference/posterior_linpred.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generic function for accessing the posterior distribution of the linear predictor — posterior_linpred","text":"","code":"posterior_linpred(object, transform = FALSE, ...)"},{"path":"https://mc-stan.org/rstantools/dev/reference/posterior_linpred.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generic function for accessing the posterior distribution of the linear predictor — posterior_linpred","text":"object object use. transform linear predictor transformed using inverse-link function? default FALSE, case untransformed linear predictor returned. ... Arguments passed methods. See methods rstanarm package examples.","code":""},{"path":"https://mc-stan.org/rstantools/dev/reference/posterior_linpred.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generic function for accessing the posterior distribution of the linear predictor — posterior_linpred","text":"posterior_linpred() methods return \\(D\\) \\(N\\) matrix, \\(D\\) number draws posterior distribution distribution \\(N\\) number data points.","code":""},{"path":[]},{"path":"https://mc-stan.org/rstantools/dev/reference/posterior_linpred.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Generic function for accessing the posterior distribution of the linear predictor — posterior_linpred","text":"","code":"# See help(\"posterior_linpred\", package = \"rstanarm\")"},{"path":"https://mc-stan.org/rstantools/dev/reference/posterior_predict.html","id":null,"dir":"Reference","previous_headings":"","what":"Generic function for drawing from the posterior predictive distribution — posterior_predict","title":"Generic function for drawing from the posterior predictive distribution — posterior_predict","text":"Draw posterior predictive distribution outcome. See posterior_predict.stanreg() rstanarm package example.","code":""},{"path":"https://mc-stan.org/rstantools/dev/reference/posterior_predict.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generic function for drawing from the posterior predictive distribution — posterior_predict","text":"","code":"posterior_predict(object, ...)"},{"path":"https://mc-stan.org/rstantools/dev/reference/posterior_predict.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generic function for drawing from the posterior predictive distribution — posterior_predict","text":"object object use. ... Arguments passed methods. See methods rstanarm package examples.","code":""},{"path":"https://mc-stan.org/rstantools/dev/reference/posterior_predict.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generic function for drawing from the posterior predictive distribution — posterior_predict","text":"posterior_predict() methods return \\(D\\) \\(N\\) matrix, \\(D\\) number draws posterior predictive distribution \\(N\\) number data points predicted per draw.","code":""},{"path":[]},{"path":"https://mc-stan.org/rstantools/dev/reference/posterior_predict.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Generic function for drawing from the posterior predictive distribution — posterior_predict","text":"","code":"# See help(\"posterior_predict\", package = \"rstanarm\")"},{"path":"https://mc-stan.org/rstantools/dev/reference/predictive_error.html","id":null,"dir":"Reference","previous_headings":"","what":"Generic function and default method for predictive errors — predictive_error","title":"Generic function and default method for predictive errors — predictive_error","text":"Generic function default method computing predictive errors \\(y - y^{rep}\\) (-sample, observed \\(y\\)) \\(y - \\tilde{y}\\) (--sample, new held-\\(y\\)). See predictive_error.stanreg() rstanarm package example.","code":""},{"path":"https://mc-stan.org/rstantools/dev/reference/predictive_error.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generic function and default method for predictive errors — predictive_error","text":"","code":"predictive_error(object, ...)  # Default S3 method predictive_error(object, y, ...)"},{"path":"https://mc-stan.org/rstantools/dev/reference/predictive_error.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generic function and default method for predictive errors — predictive_error","text":"object object use. ... Arguments passed methods. See methods rstanarm package examples. y default method, vector y values length number columns matrix used object.","code":""},{"path":"https://mc-stan.org/rstantools/dev/reference/predictive_error.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generic function and default method for predictive errors — predictive_error","text":"predictive_error() methods return \\(D\\) \\(N\\) matrix, \\(D\\) number draws posterior predictive distribution \\(N\\) number data points predicted per draw. default method just takes object matrix y vector.","code":""},{"path":[]},{"path":"https://mc-stan.org/rstantools/dev/reference/predictive_error.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Generic function and default method for predictive errors — predictive_error","text":"","code":"# default method y <- rnorm(10) ypred <- matrix(rnorm(500), 50, 10) pred_errors <- predictive_error(ypred, y) dim(pred_errors) #> [1] 50 10 head(pred_errors) #>            [,1]     [,2]        [,3]       [,4]        [,5]       [,6] #> [1,]  0.8549854 1.719440  0.82671781  1.9217270 -0.07652582 -1.7529923 #> [2,] -0.9440862 1.394449 -0.63117979  1.3562927  2.68527926 -1.7888098 #> [3,] -0.1194663 1.387542  1.56562319  0.8375692  1.45455909 -2.1067272 #> [4,]  1.2190102 0.149097  0.03872919  0.5782869  1.16435716 -1.9232703 #> [5,] -1.0655021 1.003315  2.12680175 -1.4893817  3.53444931 -1.0762303 #> [6,]  0.6909616 1.526605 -0.46478916  3.1713984  0.25438361  0.5454545 #>             [,7]       [,8]        [,9]      [,10] #> [1,]  2.61716373 -0.1182496 -0.43213791  0.9761024 #> [2,]  4.39913773  0.6402361 -0.51420673  1.5612902 #> [3,]  3.62497214  0.7590033  0.23356729 -0.2567486 #> [4,]  2.88392569 -0.2301847  0.05829213 -1.3629069 #> [5,]  3.62974401 -1.3950885 -0.44124800 -0.5360150 #> [6,] -0.03747409 -0.8752885  0.43604564  0.8561317  # Also see help(\"predictive_error\", package = \"rstanarm\")"},{"path":"https://mc-stan.org/rstantools/dev/reference/predictive_interval.html","id":null,"dir":"Reference","previous_headings":"","what":"Generic function for predictive intervals — predictive_interval","title":"Generic function for predictive intervals — predictive_interval","text":"See predictive_interval.stanreg() rstanarm package example.","code":""},{"path":"https://mc-stan.org/rstantools/dev/reference/predictive_interval.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generic function for predictive intervals — predictive_interval","text":"","code":"predictive_interval(object, ...)  # Default S3 method predictive_interval(object, prob = 0.9, ...)"},{"path":"https://mc-stan.org/rstantools/dev/reference/predictive_interval.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generic function for predictive intervals — predictive_interval","text":"object object use. ... Arguments passed methods. See methods rstanarm package examples. prob number \\(p \\(0,1)\\) indicating desired probability mass include intervals.","code":""},{"path":"https://mc-stan.org/rstantools/dev/reference/predictive_interval.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generic function for predictive intervals — predictive_interval","text":"predictive_interval() methods return matrix two columns many rows data points predicted. given value prob, \\(p\\), columns correspond lower upper \\(100p\\)\\ \\(100(1 - \\alpha/2)\\)\\ prob=0.9 specified (\\(90\\)\\ \"5%\" \"95%\", respectively. default method just takes object matrix computes quantiles, prob defaulting 0.9.","code":""},{"path":[]},{"path":"https://mc-stan.org/rstantools/dev/reference/predictive_interval.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Generic function for predictive intervals — predictive_interval","text":"","code":"# Default method takes a numeric matrix (of draws from posterior # predictive distribution) ytilde <- matrix(rnorm(100 * 5, sd = 2), 100, 5) # fake draws predictive_interval(ytilde, prob = 0.8) #>            10%      90% #> [1,] -3.317022 2.292091 #> [2,] -2.707817 2.573733 #> [3,] -2.627796 1.853548 #> [4,] -2.018837 2.446523 #> [5,] -2.267105 2.457976  # Also see help(\"predictive_interval\", package = \"rstanarm\")"},{"path":"https://mc-stan.org/rstantools/dev/reference/prior_summary.html","id":null,"dir":"Reference","previous_headings":"","what":"Generic function for extracting information about prior distributions — prior_summary","title":"Generic function for extracting information about prior distributions — prior_summary","text":"See prior_summary.stanreg() rstanarm package example.","code":""},{"path":"https://mc-stan.org/rstantools/dev/reference/prior_summary.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generic function for extracting information about prior distributions — prior_summary","text":"","code":"prior_summary(object, ...)  # Default S3 method prior_summary(object, ...)"},{"path":"https://mc-stan.org/rstantools/dev/reference/prior_summary.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generic function for extracting information about prior distributions — prior_summary","text":"object object use. ... Arguments passed methods. See methods rstanarm package examples.","code":""},{"path":"https://mc-stan.org/rstantools/dev/reference/prior_summary.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generic function for extracting information about prior distributions — prior_summary","text":"prior_summary() methods return object containing information prior distribution(s) used given model. structure object depend method. default method just returns object$prior.info, NULL 'prior.info' element.","code":""},{"path":[]},{"path":"https://mc-stan.org/rstantools/dev/reference/prior_summary.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Generic function for extracting information about prior distributions — prior_summary","text":"","code":"# See help(\"prior_summary\", package = \"rstanarm\")"},{"path":"https://mc-stan.org/rstantools/dev/reference/rstan_config.html","id":null,"dir":"Reference","previous_headings":"","what":"Configure system files for compiling Stan source code — rstan_config","title":"Configure system files for compiling Stan source code — rstan_config","text":"Creates update package-specific system files compile .stan model files found inst/stan.","code":""},{"path":"https://mc-stan.org/rstantools/dev/reference/rstan_config.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Configure system files for compiling Stan source code — rstan_config","text":"","code":"rstan_config(pkgdir = \".\")"},{"path":"https://mc-stan.org/rstantools/dev/reference/rstan_config.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Configure system files for compiling Stan source code — rstan_config","text":"pkgdir Path package root folder.","code":""},{"path":"https://mc-stan.org/rstantools/dev/reference/rstan_config.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Configure system files for compiling Stan source code — rstan_config","text":"Invisibly, whether files added/removed/modified function.","code":""},{"path":"https://mc-stan.org/rstantools/dev/reference/rstan_config.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Configure system files for compiling Stan source code — rstan_config","text":"Stan source files package stored : inst/stan .stan files containing instructions build stanmodel object. inst/stan/any_subfolder files included via #include \"/my_subfolder/mylib.stan\" directive. inst/stan/any_subfolder license.stan file. inst/include stan_meta_header.hpp file, used directly interacting Stan C++ libraries.","code":""},{"path":"https://mc-stan.org/rstantools/dev/reference/rstan_create_package.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a new R package with compiled Stan programs — rstan_create_package","title":"Create a new R package with compiled Stan programs — rstan_create_package","text":"rstan_create_package() function helps get started developing new R package interfaces Stan via rstan package. First basic package structure set via usethis::create_package(). several adjustments made package can include Stan programs can built binary versions (.e., pre-compiled Stan C++ code). Details section describes process See Also section provides links recommendations developers step--step walk-. version 2.0.0 rstantools rstan_package_skeleton() function defunct rstan_create_package() supported.","code":""},{"path":"https://mc-stan.org/rstantools/dev/reference/rstan_create_package.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a new R package with compiled Stan programs — rstan_create_package","text":"","code":"rstan_create_package(   path,   fields = NULL,   rstudio = TRUE,   open = TRUE,   stan_files = character(),   roxygen = TRUE,   travis = FALSE,   license = TRUE,   auto_config = TRUE )"},{"path":"https://mc-stan.org/rstantools/dev/reference/rstan_create_package.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a new R package with compiled Stan programs — rstan_create_package","text":"path path new package created (terminating package name). fields, rstudio, open usethis::create_package(). See documentation function, especially note Description section side effect changing active project. stan_files character vector paths .stan files include package. roxygen roxygen2 used documentation?  Defaults TRUE. , file R/{pkgname}-package.R added package roxygen tags required import lines. See Note section advice specific latest versions roxygen2. travis .travis.yml file added package directory? argument now deprecated. recommend using GitHub Actions set automated testings package. See https://github.com/r-lib/actions useful templates. license Logical character; whether paste contents license.stan file top Stan code, path file.  TRUE (default) adds GPL (>= 3) license (see Details). auto_config Whether automatically configure Stan functionality whenever package gets installed (see Details). Defaults TRUE.","code":""},{"path":"https://mc-stan.org/rstantools/dev/reference/rstan_create_package.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Create a new R package with compiled Stan programs — rstan_create_package","text":"function first creates regular R package using usethis::create_package(), adds infrastructure required compile export stanmodel objects. package root directory, user's Stan source code located : .stan files containing instructions build stanmodel object must placed inst/stan.  .stan files go stan/ subdirectory, invoked Stan's #include mechanism, e.g., See rstanarm many examples. folder inst/include user C++ files associated Stan programs.  folder, file directly interact Stan C++ library stan_meta_header.hpp; #include directives must channeled . final step package creation invoke rstan_config(), creates following files interfacing Stan objects R: src contains stan_ModelName{.cc/.hpp} pairs associated ModelName.stan files inst/stan define stanmodel objects. src/Makevars[.win] link StanHeaders Boost (BH) libraries. R/stanmodels.R loads C++ modules containing stanmodel class definitions, assigns R instance stanmodel object stanmodels list (names corresponding names Stan files). auto_config = TRUE, configure[.win] file added package, calling rstan_config() whenever package installed. Consequently, package must list rstantools DESCRIPTION Imports field mechanism work.  Setting auto_config = FALSE removes package's dependency rstantools, package must manually configured running rstan_config() whenever stanmodel files inst/stan added, removed, modified. order enable Stan functionality, rstantools copies files package.  Since files licensed GPL >= 3, license applies package choose distribute .  Even use rstantools create package, likely linking Rcpp export Stan C++ stanmodel objects R.  Since Rcpp released GPL >= 2, license apply package upon distribution. Authors willing license Stan programs general interest GPL invited contribute .stan files supporting R code rstanarm package.","code":"inst/   |_stan/   |   |_include/   |   |_include/ #include \"include/mylib.stan\" #include \"data/preprocess.stan\""},{"path":"https://mc-stan.org/rstantools/dev/reference/rstan_create_package.html","id":"note","dir":"Reference","previous_headings":"","what":"Note","title":"Create a new R package with compiled Stan programs — rstan_create_package","text":"devtools users, changes latest versions roxygen2 may necessary run pkgbuild::compile_dll() devtools::document() work.","code":""},{"path":"https://mc-stan.org/rstantools/dev/reference/rstan_create_package.html","id":"using-the-pre-compiled-stan-programs-in-your-package","dir":"Reference","previous_headings":"","what":"Using the pre-compiled Stan programs in your package","title":"Create a new R package with compiled Stan programs — rstan_create_package","text":"stanmodel objects corresponding Stan programs included package stored list called stanmodels. run one Stan programs within R function package just pass appropriate element stanmodels list one rstan functions model fitting (e.g., sampling()). example, Stan program \"foo.stan\" use rstan::sampling(stanmodels$foo, ...).","code":""},{"path":[]},{"path":"https://mc-stan.org/rstantools/dev/reference/rstantools-package.html","id":null,"dir":"Reference","previous_headings":"","what":"Tools for Developing R Packages Interfacing with Stan — rstantools-package","title":"Tools for Developing R Packages Interfacing with Stan — rstantools-package","text":"Stan Development Team rstantools package provides various tools developers R packages interfacing Stan (https://mc-stan.org), including functions set required package structure, S3 generic methods unify function naming across Stan-based R packages, vignettes guidelines developers. get started building package see rstan_create_package().","code":""},{"path":[]},{"path":"https://mc-stan.org/rstantools/dev/reference/rstantools-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Tools for Developing R Packages Interfacing with Stan — rstantools-package","text":"Maintainer: Jonah Gabry jgabry@gmail.com Authors: Ben Goodrich benjamin.goodrich@columbia.edu Martin Lysy mlysy@uwaterloo.ca Andrew Johnson contributors: Hamada S. Badr [contributor] Marco Colombo [contributor] Stefan Siegert [contributor] Trustees Columbia University [copyright holder]","code":""},{"path":"https://mc-stan.org/rstantools/dev/reference/rstantools_load_code.html","id":null,"dir":"Reference","previous_headings":"","what":"Helper function for loading code in roxygenise — rstantools_load_code","title":"Helper function for loading code in roxygenise — rstantools_load_code","text":"Adapted sourceDir function defined example(source).","code":""},{"path":"https://mc-stan.org/rstantools/dev/reference/rstantools_load_code.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Helper function for loading code in roxygenise — rstantools_load_code","text":"","code":"rstantools_load_code(path, trace = TRUE, ...)"},{"path":"https://mc-stan.org/rstantools/dev/reference/rstantools_load_code.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Helper function for loading code in roxygenise — rstantools_load_code","text":"path Path directory containing code load trace Whether print file names loaded ... Additional arguments passed source","code":""},{"path":"https://mc-stan.org/rstantools/dev/reference/rstantools_load_code.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Helper function for loading code in roxygenise — rstantools_load_code","text":"NULL","code":""},{"path":"https://mc-stan.org/rstantools/dev/reference/use_rstan.html","id":null,"dir":"Reference","previous_headings":"","what":"Add Stan infrastructure to an existing package — use_rstan","title":"Add Stan infrastructure to an existing package — use_rstan","text":"Add Stan infrastructure existing R package. create new package containing Stan programs use rstan_create_package() instead.","code":""},{"path":"https://mc-stan.org/rstantools/dev/reference/use_rstan.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add Stan infrastructure to an existing package — use_rstan","text":"","code":"use_rstan(pkgdir = \".\", license = TRUE, auto_config = TRUE)"},{"path":"https://mc-stan.org/rstantools/dev/reference/use_rstan.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add Stan infrastructure to an existing package — use_rstan","text":"pkgdir Path package root folder. license Logical character; whether paste contents license.stan file top Stan code, path file.  TRUE (default) adds GPL (>= 3) license (see Details). auto_config Whether automatically configure Stan functionality whenever package gets installed (see Details). Defaults TRUE.","code":""},{"path":"https://mc-stan.org/rstantools/dev/reference/use_rstan.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add Stan infrastructure to an existing package — use_rstan","text":"Invisibly, TRUE FALSE indicating whether files folders created modified.","code":""},{"path":"https://mc-stan.org/rstantools/dev/reference/use_rstan.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Add Stan infrastructure to an existing package — use_rstan","text":"Prepares package compile use Stan code performing following steps: Create inst/stan folder .stan files defining Stan models stored. Create inst/stan/include optional license.stan file stored. Create inst/include/stan_meta_header.hpp include optional header files used Stan code. Create src folder (exist) contain Stan C++ code. Create R folder (exist) contain wrapper code expose Stan C++ classes R. Update DESCRIPTION file contain needed dependencies compile Stan C++ code. NAMESPACE file generic (.e., created rstan_create_package()), append import(Rcpp, methods), importFrom(rstan, sampling), importFrom(rstantools, rstan_config), importFrom(RcppParallel, RcppParallelLibs), useDynLib directives.  NAMESPACE generic, display message telling user add NAMESPACE . auto_config = TRUE, configure[.win] file added package, calling rstan_config() whenever package installed. Consequently, package must list rstantools DESCRIPTION Imports field mechanism work.  Setting auto_config = FALSE removes package's dependency rstantools, package must manually configured running rstan_config() whenever stanmodel files inst/stan added, removed, modified.","code":""},{"path":"https://mc-stan.org/rstantools/dev/reference/use_rstan.html","id":"using-the-pre-compiled-stan-programs-in-your-package","dir":"Reference","previous_headings":"","what":"Using the pre-compiled Stan programs in your package","title":"Add Stan infrastructure to an existing package — use_rstan","text":"stanmodel objects corresponding Stan programs included package stored list called stanmodels. run one Stan programs within R function package just pass appropriate element stanmodels list one rstan functions model fitting (e.g., sampling()). example, Stan program \"foo.stan\" use rstan::sampling(stanmodels$foo, ...).","code":""},{"path":[]},{"path":"https://mc-stan.org/rstantools/dev/news/index.html","id":"rstantools-250","dir":"Changelog","previous_headings":"","what":"rstantools 2.5.0","title":"rstantools 2.5.0","text":"CRAN release: 2025-09-01 Extended loo_pit() discrete data @TeemuSailynoja #121 Add loo_epred() @avehtari #122 Fix stanfunctions failures new Stan RNG @andrjohns #125 Add handling new RNG type Stan @andrjohns #126 Fix regression (introduced 2.4.0) compilation packages custom Stan functions @mcol #137 Fix roxygen2 warning @mcol #136","code":""},{"path":"https://mc-stan.org/rstantools/dev/news/index.html","id":"rstantools-240","dir":"Changelog","previous_headings":"","what":"rstantools 2.4.0","title":"rstantools 2.4.0","text":"CRAN release: 2024-01-31 Update match CRAN’s patched version @jgabry #114 Include additional template imports suppress NOTEs @andrjohns #115 Fix packages stanfunctions rstan 2.33+ @andrjohns #117","code":""},{"path":"https://mc-stan.org/rstantools/dev/news/index.html","id":"rstantools-231","dir":"Changelog","previous_headings":"","what":"rstantools 2.3.1","title":"rstantools 2.3.1","text":"CRAN release: 2023-03-30 Deprecated init_cpp. (#105) Bugfix standalone functions 2.31 (#110) add Makevars current platform. (#109) Suppress false-positive warning standalone functions. (#111)","code":""},{"path":"https://mc-stan.org/rstantools/dev/news/index.html","id":"rstantools-230","dir":"Changelog","previous_headings":"","what":"rstantools 2.3.0","title":"rstantools 2.3.0","text":"CRAN release: 2023-03-09 Updated C++ standard C++17 (#100) Updated handling exporting standalone stan functions packages compatibility 2.26 (beyond) versions StanHeaders rstan (#101) Added Andrew Johnson (@andrjohns) author","code":""},{"path":"https://mc-stan.org/rstantools/dev/news/index.html","id":"rstantools-220","dir":"Changelog","previous_headings":"","what":"rstantools 2.2.0","title":"rstantools 2.2.0","text":"CRAN release: 2022-04-08 (Github issue/PR numbers parentheses) Updated “Step step guide” vignette instructions adding new Stan models existing R package already Stan models. (#79, @rerickson-usgs) Fixed R CMD check NOTE “configure appear #! interpreter line”. (#83) Use writeLines instead cat fix line endings issue reported CRAN. (#87) Switch GitHub Actions CI. (#90, @andrjohns) Deprecate automatic creation .travis.yml file. now recommend use GitHub Actions. (#89) Ensure compatibility future versions RStan. (#85, #94, @andrjohns, @hsbadr)","code":""},{"path":"https://mc-stan.org/rstantools/dev/news/index.html","id":"rstantools-211","dir":"Changelog","previous_headings":"","what":"rstantools 2.1.1","title":"rstantools 2.1.1","text":"CRAN release: 2020-07-06 (Github issue/PR numbers parentheses) Compatibility StanHeaders 2.21.0-5","code":""},{"path":"https://mc-stan.org/rstantools/dev/news/index.html","id":"rstantools-210","dir":"Changelog","previous_headings":"","what":"rstantools 2.1.0","title":"rstantools 2.1.0","text":"CRAN release: 2020-06-01 Compatibility StanHeaders 2.21.0-3 Improve messaging around updating NAMESPACE file (#75, @mikekaminsky) informative error message rstan_create_package() directory already exists. (#68, @mcol) Add generated C++ files .gitignore .Rbuildignore (#66, @mcol) New generic posterior_epred() (#74)","code":""},{"path":"https://mc-stan.org/rstantools/dev/news/index.html","id":"rstantools-200","dir":"Changelog","previous_headings":"","what":"rstantools 2.0.0","title":"rstantools 2.0.0","text":"CRAN release: 2019-09-14 Added Martin Lysy coauthor. New function rstan_create_package() (based usethis::create_package()) replaces rstan_package_skeleton() purpose starting new package Stan functionality. Stan functionality can added existing package calling use_rstan() instead starting new package scratch. Stan folder infrastructure now puts .stan files inst/stan auto-generated C++ files directly src. last step ensures custom Rcpp source code can coexist Stan C++ code. time .stan file gets added/removed/modified requires call rstan_config() order generate Stan C++ code Rcpp::loadModule() calls. However, setting auto_config = TRUE (default) rstan_create_package() ensures rstan_config() called whenever package installed (including via devtools::load_all()), need call manually unless user wishes inspect Stan C++ code issues. roxygen2 documentation now optional, remains default. Rather generating Stan “system files” via cat commands, rstantools now stores template files inst/include/sys, build process can easily modified improvements become apparent.","code":""},{"path":"https://mc-stan.org/rstantools/dev/news/index.html","id":"rstantools-151","dir":"Changelog","previous_headings":"","what":"rstantools 1.5.1","title":"rstantools 1.5.1","text":"CRAN release: 2018-08-22 (Github issue/PR numbers parentheses) Fix issue related changes usethis package removing fields argument rstan_package_skeleton() setting internally instead. New generic nsamples() (#35)","code":""},{"path":"https://mc-stan.org/rstantools/dev/news/index.html","id":"rstantools-150","dir":"Changelog","previous_headings":"","what":"rstantools 1.5.0","title":"rstantools 1.5.0","text":"CRAN release: 2018-04-17 (Github issue/PR numbers parentheses) New vignette walking package creation process. (#9) (thanks Stefan Siegert) rstan_package_skeleton() now calls usethis::create_package() instead utils::package.skeleton(). (#28) Update rstan_package_skeleton() latest build process (#19) rstan_package_skeleton() now bit work user make sure NAMESPACE file correct. Simplify instructions Read--delete-(related #19).","code":""},{"path":"https://mc-stan.org/rstantools/dev/news/index.html","id":"rstantools-140","dir":"Changelog","previous_headings":"","what":"rstantools 1.4.0","title":"rstantools 1.4.0","text":"CRAN release: 2017-12-21 (Github issue/PR numbers parentheses) Update rstan_package_skeleton() correspond rstanarm 2.17.2.","code":""},{"path":"https://mc-stan.org/rstantools/dev/news/index.html","id":"rstantools-130","dir":"Changelog","previous_headings":"","what":"rstantools 1.3.0","title":"rstantools 1.3.0","text":"CRAN release: 2017-08-02 (Github issue/PR numbers parentheses) Add bayes_R2() generic default method. (#8)","code":""},{"path":"https://mc-stan.org/rstantools/dev/news/index.html","id":"rstantools-121","dir":"Changelog","previous_headings":"","what":"rstantools 1.2.1","title":"rstantools 1.2.1","text":"(Github issue/PR numbers parentheses) Add init_cpp() function generating src/init.cpp order pass R CMD check R 3.4.x. rstan_package_skeleton() calls init_cpp() internally. (#6)","code":""},{"path":"https://mc-stan.org/rstantools/dev/news/index.html","id":"rstantools-120","dir":"Changelog","previous_headings":"","what":"rstantools 1.2.0","title":"rstantools 1.2.0","text":"CRAN release: 2017-03-17 (Github issue/PR numbers parentheses) Minor fixes rstan_package_skeleton() better Windows compatibility. (#1, #2) Fix typos developer guidelines vignette. (#3, #4) Add loo_predict(), loo_linpred(), loo_predictive_interval() generics preparation adding methods rstanarm package. (#5)","code":""},{"path":"https://mc-stan.org/rstantools/dev/news/index.html","id":"rstantools-110","dir":"Changelog","previous_headings":"","what":"rstantools 1.1.0","title":"rstantools 1.1.0","text":"CRAN release: 2016-12-20 Changes rstan_package_skeleton: Add comment Read--delete-importing Rcpp methods packages. Include methods Depends field DESCRIPTION file. Also download rstanarm’s Makevars.win file.","code":""},{"path":"https://mc-stan.org/rstantools/dev/news/index.html","id":"rstantools-100","dir":"Changelog","previous_headings":"","what":"rstantools 1.0.0","title":"rstantools 1.0.0","text":"CRAN release: 2016-11-20 Initial CRAN release","code":""}]
